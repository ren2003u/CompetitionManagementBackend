(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d12f7970"],{"0ee3":function(e,t,a){"use strict";a("6ffe")},2227:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return m})),a.d(t,"d",(function(){return c}));var n=a("b775");function i(){return Object(n["a"])({url:"/team/list",method:"get"})}function o(e){return Object(n["a"])({url:"/team/byname/"+e,method:"get"})}function r(e){return Object(n["a"])({url:"/team/addOrUpdate",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/team/addOrUpdate",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/team/delete/"+e,method:"delete"})}function m(e){return Object(n["a"])({url:"/user/searchUsersByTeamName?team_name="+e,method:"post"})}function c(){return Object(n["a"])({url:"/team/getRankByTeamCollege",method:"get"})}},"6ffe":function(e,t,a){},f100:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"card box-title"},[a("el-input",{attrs:{placeholder:"请输入您要查找的队伍名称","prefix-icon":"el-icon-search"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchTeam},slot:"append"},[e._v("确认搜索")])],1)],1),a("el-card",{staticClass:"card box-body"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"medium",plain:"",disabled:"admin"!=e.inf.status},on:{click:e.handleAdd}},[e._v("添加队伍")]),a("el-button",{attrs:{type:"info",icon:"el-icon-refresh",size:"medium",plain:""},on:{click:e.getList}},[e._v("刷新列表")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,stripe:"",border:!0,height:"520"}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"#",width:"80"}}),a("el-table-column",{attrs:{label:"队伍名称",prop:"team_name",align:"center",width:"200"}}),a("el-table-column",{attrs:{label:"所属学院",prop:"team_affiliation_college",align:"center",width:"180"}}),a("el-table-column",{attrs:{label:"队长",prop:"teamLeader",align:"center"}}),a("el-table-column",{attrs:{label:"队员1",align:"center",prop:"teamMember_1"}}),a("el-table-column",{attrs:{label:"队员2",align:"center",prop:"teamMember_2"}}),a("el-table-column",{attrs:{label:"总得分",align:"center",prop:"total_score"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["0"===n.status?a("el-tag",{attrs:{size:"medium"}},[e._v("未满")]):e._e(),"1"===n.status?a("el-tag",{attrs:{size:"medium",type:"danger"}},[e._v("已满")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[void 0==e.inf.team_name||""==e.inf.team_name?a("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"primary",plain:"",disabled:"0"!==n.status&&(void 0==e.inf.team_name||""==e.inf.team_name)},on:{click:function(t){return e.handleAddTeam(n)}}},[e._v("入队")]):a("el-button",{attrs:{size:"mini",icon:"el-icon-minus",type:"warning",plain:"",disabled:e.inf.team_name!=n.team_name},on:{click:function(t){return e.handleWithdrawTeam(n)}}},[e._v("离队")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"info",plain:"",disabled:"player"==e.inf.status},on:{click:function(t){return e.handleInfo(n)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",plain:"",disabled:"admin"!=e.inf.status},on:{click:function(t){return e.handleDel(n)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%","label-position":"left"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"80px",model:e.form}},[a("el-form-item",{attrs:{label:"队伍名称"}},[a("el-input",{attrs:{disabled:"队伍信息"==e.dialogTitle},model:{value:e.form.team_name,callback:function(t){e.$set(e.form,"team_name",t)},expression:"form.team_name"}})],1),a("el-form-item",{attrs:{label:"所属学院"}},[a("el-input",{model:{value:e.form.team_affiliation_college,callback:function(t){e.$set(e.form,"team_affiliation_college",t)},expression:"form.team_affiliation_college"}})],1),a("el-form-item",{attrs:{label:"队员"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.teamMember_1,callback:function(t){e.$set(e.form,"teamMember_1",t)},expression:"form.teamMember_1"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-remove-outline",disabled:"captain"!=e.inf.status||"（暂无）"==e.form.teamMember_2},on:{click:function(t){return e.deleteMember(e.form.teamMember_1,e.form.team_name)}},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"队员"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.teamMember_2,callback:function(t){e.$set(e.form,"teamMember_2",t)},expression:"form.teamMember_2"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-remove-outline",disabled:"captain"!=e.inf.status||"（暂无）"==e.form.teamMember_2},on:{click:function(t){return e.deleteMember(e.form.teamMember_1,e.form.team_name)}},slot:"append"})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")]),a("el-button",{on:{click:function(t){return e.cancelForm()}}},[e._v("取 消")])],1)],1)],1)},i=[],o=a("2227"),r=a("c24f"),s=a("b775");function l(e){return Object(s["a"])({url:"/player/joinIntoTeam?team_name="+e.team_name+"&username="+e.username,method:"post"})}function m(e){return Object(s["a"])({url:"/player/withdrawFromTeam?team_name="+e.team_name+"&username="+e.username,method:"post"})}function c(e,t){return Object(s["a"])({url:"/player/captainDeletePlayer?team_name="+e+"&playerName="+t,method:"post"})}var u={data:function(){return{inf:{},searchValue:"",dialogVisible:!1,dialog:!1,dialogTitle:"",form:{},tableData:[]}},created:function(){this.getList(),this.getInf()},methods:{deleteMember:function(e,t){var a=this;this.$confirm("你确定移除该队员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(1),c(t,e).then((function(e){a.$message({type:"success",message:"移除成功!"}),a.getList(),a.form=a.tableData[a.form.id]}))})).catch((function(){a.$message({type:"info",message:"已取消"})}))},getInf:function(){var e=this;Object(r["e"])().then((function(t){e.inf=t.data}))},getList:function(){var e=this;Object(o["c"])().then((function(t){for(var a=t.data,n=function(e){a[e].id=e,a[e].teamLeader="",a[e].teamMember_1="",a[e].teamMember_2="",a[e].status="0",a[e].total_score=0,Object(o["f"])(a[e].team_name).then((function(t){for(var n=t.data,i=0;i<n.length;i++)"captain"===n[i].status?(a[e].teamLeader=n[i].username,a[e].total_score+=n[i].score):""==a[e].teamMember_1?(a[e].teamMember_1=t.data[i].username,a[e].total_score+=n[i].score):(a[e].teamMember_2=t.data[i].username,a[e].total_score+=n[i].score,a[e].status="1");""==a[e].teamLeader&&(a[e].teamLeader="（空缺）"),""==a[e].teamMember_1&&(a[e].teamMember_1="（空缺）"),""==a[e].teamMember_2&&(a[e].teamMember_2="（空缺）")}))},i=0;i<a.length;i++)n(i);e.tableData=a}))},resetForm:function(){this.form={team_number:void 0,team_name:void 0,team_affiliation_college:void 0,total_score:void 0}},handleAdd:function(){this.resetForm(),this.dialogVisible=!0,this.dialogTitle="新增队伍"},searchTeam:function(){var e=this;console.log(this.searchValue),""!=this.searchValue&&Object(o["e"])(this.searchValue).then((function(t){var a=t.data;a.teamLeader="",a.teamMember_1="",a.teamMember_2="",a.status="0",a.total_score=0,Object(o["f"])(a.team_name).then((function(t){for(var n=t.data,i=0;i<n.length;i++)"captain"===n[i].status?(a.teamLeader=n[i].username,a.total_score+=n[i].score):""==a.teamMember_1?(a.teamMember_1=t.da[i].username,a.total_score+=n[i].score):(a.teamMember_2=t.da[i].username,a.total_score+=n[i].score,a.status="1");""==a.teamLeader&&(a.teamLeader="（空缺）"),""==a.teamMember_1&&(a.teamMember_1="（空缺）"),""==a.teamMember_2&&(a.teamMember_2="（空缺）"),e.tableData=[],e.tableData.push(a)}))}))},submit:function(){var e=this;void 0!==this.form.team_number?Object(o["g"])(this.form).then((function(t){e.$message({type:"success",message:"修改成功"}),e.getList(),e.dialogVisible=!1})):Object(o["a"])(this.form).then((function(t){e.$message({type:"success",message:"添加成功"}),e.dialogVisible=!1,e.getList()}))},handleInfo:function(e){this.dialogVisible=!0,this.dialogTitle="队伍信息",this.form=this.tableData[e.id]},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},cancelForm:function(){this.dialog=!1,this.dialogVisible=!1},handleDel:function(e){var t=this;this.$confirm("你确定删除改项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(e.team_number).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleWithdrawTeam:function(e){var t=this,a=this.inf.username,n=e.team_name;this.$confirm("是否选择退出"+e.team_name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m({team_name:n,username:a}).then((function(e){-1!=e.code?(t.$message({type:"success",message:"离队成功!"}),t.getInf(),t.getList()):t.$message.error(e.msg)}))})).catch((function(){t.$message({type:"info",message:"已取消离队"})}))},handleAddTeam:function(e){var t=this,a=this.inf.username,n=e.team_name;this.$confirm("是否选择加入"+e.team_name+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l({team_name:n,username:a}).then((function(e){-1!=e.code?(t.$message({type:"success",message:"入队成功!"}),t.getInf(),t.getList()):t.$message.error(e.msg)}))})).catch((function(){t.$message({type:"info",message:"已取消入队"})}))}}},f=u,d=(a("0ee3"),a("2877")),b=Object(d["a"])(f,n,i,!1,null,null,null);t["default"]=b.exports}}]);